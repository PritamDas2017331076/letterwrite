{"ast":null,"code":"var _jsxFileName = \"/home/pritam/MyProjects/letter-template/src/components/Teditor.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { EditorState, convertFromRaw, convertToRaw } from 'draft-js';\nimport { Editor } from 'react-draft-wysiwyg';\nimport { convertToHTML } from 'draft-convert';\nimport DOMPurify from 'dompurify';\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport { createWithContent } from 'draft-js/lib/EditorState';\nimport axios from '../services/axios.js';\nimport { axios as aos } from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Teditor = props => {\n  _s();\n\n  // const id=props.location.state.id;\n  const [editorState, setEditorState] = useState(() => EditorState.createEmpty());\n  useEffect(() => {\n    setEditorState(editorState);\n  }, []);\n  const [convertedContent, setConvertedContent] = useState(null);\n\n  const handleEditorChange = state => {\n    setEditorState(state);\n    toDb(state);\n  };\n\n  const toDb = state => {\n    const raw = convertToRaw(state.getCurrentContent());\n    const jsData = JSON.stringify(raw);\n    localStorage.setItem('val', jsData);\n    return jsData;\n  };\n\n  const fromJson = jsData => {\n    // const jsData = localStorage.getItem('val')\n    const raw = JSON.parse(jsData);\n    const cState = convertFromRaw(raw);\n    const eState = createWithContent(cState);\n    return eState;\n  };\n\n  const convertContentToHTML = () => {\n    let currentContentAsHTML = convertToHTML(editorState.getCurrentContent());\n    setConvertedContent(currentContentAsHTML);\n  };\n\n  const createMarkup = html => {\n    return {\n      __html: DOMPurify.sanitize(html)\n    };\n  };\n\n  const [use, setUse] = useState('');\n  aos.get('http://localhost:5000/users/me', {\n    headers: {\n      'Authorization': localStorage.getItem('token')\n    }\n  }).then(res => {\n    console.log('present user exists');\n    console.log(res.data);\n    setUse(res.data._id);\n    console.log('here is out user id');\n    console.log(use);\n  }).catch(error => {\n    console.log('no one logged in');\n  });\n\n  const addTemplate = async e => {\n    e.preventDefault();\n    const jsData = toDb(editorState);\n    console.log('our id: ', props.location.state);\n    console.log('jssssData = ', jsData);\n    const template = {\n      userId: props.location.state.id,\n      data: jsData\n    };\n    const data = await axios.addTemplate(template);\n    console.log('success!');\n  }; //console.log('hello text editor',props.location.state.id)\n\n\n  const loadTemplate = async e => {\n    e.preventDefault();\n    const jsData = await axios.getTemplates();\n    const data = jsData.data[1];\n    console.log('data = ', data);\n    const estate = fromJson(data.data);\n    console.log('estate = ', estate);\n    setEditorState(estate);\n  }; //console.log('hello text editor',props.location.state.id)\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrapper\",\n      children: /*#__PURE__*/_jsxDEV(Editor, {\n        editorState: editorState,\n        onEditorStateChange: handleEditorChange,\n        wrapperClassName: \"wrapper-class\",\n        editorClassName: \"editor-class\",\n        toolbarClassName: \"hide-toolbar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: addTemplate,\n        children: \"Save\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Teditor, \"ee/olHockrzFhqiFwezLijhgdyY=\");\n\n_c = Teditor;\nexport default Teditor;\n\nvar _c;\n\n$RefreshReg$(_c, \"Teditor\");","map":{"version":3,"sources":["/home/pritam/MyProjects/letter-template/src/components/Teditor.js"],"names":["React","useEffect","useState","EditorState","convertFromRaw","convertToRaw","Editor","convertToHTML","DOMPurify","createWithContent","axios","aos","Teditor","props","editorState","setEditorState","createEmpty","convertedContent","setConvertedContent","handleEditorChange","state","toDb","raw","getCurrentContent","jsData","JSON","stringify","localStorage","setItem","fromJson","parse","cState","eState","convertContentToHTML","currentContentAsHTML","createMarkup","html","__html","sanitize","use","setUse","get","headers","getItem","then","res","console","log","data","_id","catch","error","addTemplate","e","preventDefault","location","template","userId","id","loadTemplate","getTemplates","estate"],"mappings":"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","sourcesContent":["import React, {useEffect, useState } from 'react';\nimport { EditorState ,convertFromRaw,convertToRaw} from 'draft-js';\nimport { Editor } from 'react-draft-wysiwyg';\nimport { convertToHTML } from 'draft-convert';\nimport DOMPurify from 'dompurify';\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport { createWithContent } from 'draft-js/lib/EditorState';\nimport axios from '../services/axios.js';\nimport {axios as aos} from 'axios'\nconst Teditor = (props) => {\n  \n // const id=props.location.state.id;\n \n\n  const [editorState, setEditorState] = useState(\n    () => EditorState.createEmpty(),\n  );\n  useEffect(() => {\n    setEditorState(editorState)\n  }, [])\n  const  [convertedContent, setConvertedContent] = useState(null);\n  const handleEditorChange = (state) => {\n    setEditorState(state);\n    toDb(state)\n  }\n  const toDb = (state)=>{\n    const raw = convertToRaw(state.getCurrentContent())\n    const jsData = JSON.stringify(raw)\n    localStorage.setItem('val',jsData)\n    return jsData\n  }\n  const fromJson = (jsData)=>{\n    // const jsData = localStorage.getItem('val')\n    const raw = JSON.parse(jsData)\n    const cState = convertFromRaw(raw)\n    const eState = createWithContent(cState)\n    return eState\n  }\n  const convertContentToHTML = () => {\n    let currentContentAsHTML = convertToHTML(editorState.getCurrentContent());\n    setConvertedContent(currentContentAsHTML);\n  }\n  const createMarkup = (html) => {\n    return  {\n      __html: DOMPurify.sanitize(html)\n    }\n  }\n  const [use, setUse] = useState('')\n\n    aos.get('http://localhost:5000/users/me',{\n        headers: {\n            'Authorization': localStorage.getItem('token')\n          }\n    })\n    .then(res => {\n        console.log('present user exists');\n        console.log(res.data) ;\n        setUse(res.data._id);\n        console.log('here is out user id')\n        console.log(use)\n    })\n    .catch(error => {\n        console.log('no one logged in')\n    })\n  const addTemplate = async(e)=>{\n    e.preventDefault()\n    const jsData = toDb(editorState)\n    console.log('our id: ',props.location.state)\n    console.log('jssssData = ',jsData)\n    const template = {\n      userId:props.location.state.id,\n      data:jsData\n    }\n    const data = await axios.addTemplate(template)\n    console.log('success!');\n  }\n  //console.log('hello text editor',props.location.state.id)\n  const loadTemplate = async (e)=>{\n    e.preventDefault()\n    const jsData = await axios.getTemplates()\n    const data = jsData.data[1]\n    console.log('data = ',data)\n    const estate = fromJson(data.data)\n    console.log('estate = ',estate)\n    setEditorState(estate)\n\n  }\n  //console.log('hello text editor',props.location.state.id)\n  return (\n    <div className=\"App\">\n      <div className = 'wrapper'>\n        <Editor\n          editorState={editorState}\n          onEditorStateChange={handleEditorChange}\n          wrapperClassName=\"wrapper-class\"\n          editorClassName=\"editor-class\"\n          toolbarClassName='hide-toolbar'\n        />\n      </div>\n      {/* <div className=\"preview\" dangerouslySetInnerHTML={createMarkup(convertedContent)}> sdfa</div> */}\n      <div>\n        <button onClick ={addTemplate}>Save</button>\n      </div>\n    </div>\n  )\n}\nexport default Teditor;\n"]},"metadata":{},"sourceType":"module"}