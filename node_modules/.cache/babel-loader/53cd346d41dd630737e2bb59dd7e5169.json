{"ast":null,"code":"var _jsxFileName = \"/media/zakir/study/linux/projects/letter-template/src/components/Teditor.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { EditorState, convertFromRaw, convertToRaw } from 'draft-js';\nimport { Editor } from 'react-draft-wysiwyg';\nimport { convertToHTML } from 'draft-convert';\nimport DOMPurify from 'dompurify';\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport { createWithContent, set } from 'draft-js/lib/EditorState';\nimport axios from '../services/axios.js';\nimport { axios as aos } from 'axios';\nimport { useLocation } from 'react-router-dom';\nimport { ContentState } from 'draft-js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Teditor = () => {\n  _s();\n\n  const [flag, setFlag] = useState(0);\n  const {\n    state\n  } = useLocation();\n\n  const fromDb = jsData => {\n    const raw = JSON.parse(jsData);\n    const cState = convertFromRaw(raw);\n    const eState = createWithContent(cState);\n    return eState;\n  }; // const [editorState, setEditorState] = useState(fromDb(state.data));\n\n\n  const [editorState, setEditorState] = useState(() => EditorState.createEmpty()); // console.log('state = ',state.data)\n\n  const fun = async () => {\n    const res = await axios.getTemplateById(state.templateId);\n    const dt = res.data.data; // console.log('dtf df  = ',dt)\n\n    setEditorState(fromDb(dt));\n    setFlag(1);\n  };\n\n  useEffect(() => {\n    console.log('flag = ', flag);\n    fun();\n\n    if (flag === 0) {// console.log('36')\n    }\n\n    handleEditorChange(editorState);\n  }, []);\n\n  const handleEditorChange = state => {\n    setEditorState(state);\n  };\n\n  const toDb = state => {\n    const raw = convertToRaw(state.getCurrentContent());\n    const jsData = JSON.stringify(raw);\n    return jsData;\n  };\n\n  const saveTemplate = async e => {\n    e.preventDefault();\n    const dbData = toDb(editorState);\n    const obj = {\n      data: dbData\n    };\n    await axios.UpdateTemplate(state.templateId, obj);\n    console.log('success!');\n  };\n\n  const loadTemplate = async e => {\n    e.preventDefault();\n    const templateData = await axios.getTemplateById(state.templateId);\n    console.log('templateData = ', templateData);\n    const data = templateData.data.data;\n    const estate = fromDb(data);\n    setEditorState(estate);\n  }; //console.log('hello text editor',props.location.state.id)\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrapper\",\n      children: /*#__PURE__*/_jsxDEV(Editor, {\n        editorState: editorState,\n        onEditorStateChange: handleEditorChange,\n        wrapperClassName: \"wrapper-class\",\n        editorClassName: \"editor-class\",\n        toolbarClassName: \"hide-toolbar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: loadTemplate,\n        children: \"load\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: saveTemplate,\n        children: \"Save\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Teditor, \"nlmu+cq529tORRZDOCWiFeIWYcA=\", false, function () {\n  return [useLocation];\n});\n\n_c = Teditor;\nexport default Teditor;\n\nvar _c;\n\n$RefreshReg$(_c, \"Teditor\");","map":{"version":3,"sources":["/media/zakir/study/linux/projects/letter-template/src/components/Teditor.js"],"names":["React","useEffect","useState","EditorState","convertFromRaw","convertToRaw","Editor","convertToHTML","DOMPurify","createWithContent","set","axios","aos","useLocation","ContentState","Teditor","flag","setFlag","state","fromDb","jsData","raw","JSON","parse","cState","eState","editorState","setEditorState","createEmpty","fun","res","getTemplateById","templateId","dt","data","console","log","handleEditorChange","toDb","getCurrentContent","stringify","saveTemplate","e","preventDefault","dbData","obj","UpdateTemplate","loadTemplate","templateData","estate"],"mappings":"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","sourcesContent":["import React, {useEffect, useState } from 'react';\nimport { EditorState ,convertFromRaw,convertToRaw} from 'draft-js';\nimport { Editor } from 'react-draft-wysiwyg';\nimport { convertToHTML } from 'draft-convert';\nimport DOMPurify from 'dompurify';\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport { createWithContent, set } from 'draft-js/lib/EditorState';\nimport axios from '../services/axios.js';\nimport {axios as aos} from 'axios'\nimport { useLocation } from 'react-router-dom';\nimport { ContentState } from 'draft-js';\nconst Teditor = () => {\n  const [flag,setFlag] = useState(0)\n  const {state} = useLocation();\n  const fromDb = (jsData)=>{\n    const raw = JSON.parse(jsData)\n    const cState = convertFromRaw(raw)\n    const eState = createWithContent(cState)\n    return eState\n  }\n  // const [editorState, setEditorState] = useState(fromDb(state.data));\n  const [editorState, setEditorState] = useState(\n    () => EditorState.createEmpty(),\n  );\n  // console.log('state = ',state.data)\n  \n  const fun = async ()=>{\n    const res = await axios.getTemplateById(state.templateId)\n    const dt = res.data.data\n    // console.log('dtf df  = ',dt)\n    setEditorState(fromDb(dt))\n    setFlag(1)\n  }\n  useEffect(() => {\n    console.log('flag = ',flag)\n    fun()\n    if(flag === 0){\n      // console.log('36')\n    }\n    handleEditorChange(editorState)\n  }, [])\n\n  const handleEditorChange = (state) => {\n    setEditorState(state);\n  }\n  const toDb = (state)=>{\n    const raw = convertToRaw(state.getCurrentContent())\n    const jsData = JSON.stringify(raw)\n    return jsData\n  }\n  const saveTemplate = async(e)=>{\n    e.preventDefault()\n    const dbData = toDb(editorState)\n    const obj = {\n      data:dbData\n    }\n    await axios.UpdateTemplate(state.templateId,obj)\n    console.log('success!');\n  }\n  \n  const loadTemplate = async (e)=>{\n    e.preventDefault()\n    const templateData = await axios.getTemplateById(state.templateId)\n    console.log('templateData = ',templateData)\n    const data = templateData.data.data\n    const estate = fromDb(data)    \n    setEditorState(estate)\n  }\n  //console.log('hello text editor',props.location.state.id)\n  return (\n    <div className=\"App\">\n      <div className = 'wrapper'>\n        <Editor\n          editorState={editorState}\n          onEditorStateChange={handleEditorChange}\n          wrapperClassName=\"wrapper-class\"\n          editorClassName=\"editor-class\"\n          toolbarClassName='hide-toolbar'\n        />\n      </div>\n      <div>\n        <button onClick ={loadTemplate}>load</button>\n        <button onClick = {saveTemplate}>Save</button>\n      </div>\n    </div>\n  )\n}\nexport default Teditor;\n"]},"metadata":{},"sourceType":"module"}