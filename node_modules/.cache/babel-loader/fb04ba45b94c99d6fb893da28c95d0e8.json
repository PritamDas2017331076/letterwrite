{"ast":null,"code":"var _jsxFileName = \"/home/pritam/MyProjects/letter-template/src/components/Teditor.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { EditorState, convertFromRaw, convertToRaw } from 'draft-js';\nimport { Editor } from 'react-draft-wysiwyg';\nimport { convertToHTML } from 'draft-convert';\nimport DOMPurify from 'dompurify';\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport { createWithContent } from 'draft-js/lib/EditorState';\nimport axios from '../services/axios.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Teditor = () => {\n  _s();\n\n  const [use, setUse] = useState('');\n  axios.get('http://localhost:5000/users/me', {\n    headers: {\n      'Authorization': localStorage.getItem('token')\n    }\n  }).then(res => {\n    console.log('present user exists');\n    console.log(res.data);\n    setUse(res.data._id);\n    console.log('here is out user id');\n    console.log(use);\n  }).catch(error => {\n    console.log('no one logged in');\n  });\n  const [editorState, setEditorState] = useState(() => EditorState.createEmpty());\n  useEffect(() => {\n    setEditorState(editorState);\n  }, []);\n  const [convertedContent, setConvertedContent] = useState(null);\n\n  const handleEditorChange = state => {\n    setEditorState(state);\n    toDb(state);\n  };\n\n  const toDb = state => {\n    const raw = convertToRaw(state.getCurrentContent());\n    const jsData = JSON.stringify(raw);\n    localStorage.setItem('val', jsData);\n    return jsData;\n  };\n\n  const fromJson = jsData => {\n    // const jsData = localStorage.getItem('val')\n    const raw = JSON.parse(jsData);\n    const cState = convertFromRaw(raw);\n    const eState = createWithContent(cState);\n    return eState;\n  };\n\n  const convertContentToHTML = () => {\n    let currentContentAsHTML = convertToHTML(editorState.getCurrentContent());\n    setConvertedContent(currentContentAsHTML);\n  };\n\n  const createMarkup = html => {\n    return {\n      __html: DOMPurify.sanitize(html)\n    };\n  };\n\n  const addTemplate = async e => {\n    e.preventDefault();\n    const jsData = toDb(editorState);\n    console.log('jsData = ', jsData);\n    const template = {\n      userId: \"61c9a3787446b48ff058b3fb\",\n      data: jsData\n    };\n    const data = await axios.addTemplate(template);\n    console.log('success!');\n  };\n\n  const loadTemplate = async e => {\n    e.preventDefault();\n    const jsData = await axios.getTemplates();\n    const data = jsData.data[1];\n    console.log('data = ', data);\n    const estate = fromJson(data.data);\n    console.log('estate = ', estate);\n    setEditorState(estate);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrapper\",\n      children: /*#__PURE__*/_jsxDEV(Editor, {\n        editorState: editorState,\n        onEditorStateChange: handleEditorChange,\n        wrapperClassName: \"wrapper-class\",\n        editorClassName: \"editor-class\",\n        toolbarClassName: \"hide-toolbar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this), \" \", \" \", /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: loadTemplate,\n        children: \" Save \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 119\n    }, this), \" \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 14\n  }, this);\n};\n\n_s(Teditor, \"R6z0pxTQ4wfb41NgnVelTG5WiOU=\");\n\n_c = Teditor;\nexport default Teditor;\n\nvar _c;\n\n$RefreshReg$(_c, \"Teditor\");","map":{"version":3,"sources":["/home/pritam/MyProjects/letter-template/src/components/Teditor.js"],"names":["React","useEffect","useState","EditorState","convertFromRaw","convertToRaw","Editor","convertToHTML","DOMPurify","createWithContent","axios","Teditor","use","setUse","get","headers","localStorage","getItem","then","res","console","log","data","_id","catch","error","editorState","setEditorState","createEmpty","convertedContent","setConvertedContent","handleEditorChange","state","toDb","raw","getCurrentContent","jsData","JSON","stringify","setItem","fromJson","parse","cState","eState","convertContentToHTML","currentContentAsHTML","createMarkup","html","__html","sanitize","addTemplate","e","preventDefault","template","userId","loadTemplate","getTemplates","estate"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { EditorState, convertFromRaw, convertToRaw } from 'draft-js';\nimport { Editor } from 'react-draft-wysiwyg';\nimport { convertToHTML } from 'draft-convert';\nimport DOMPurify from 'dompurify';\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport { createWithContent } from 'draft-js/lib/EditorState';\nimport axios from '../services/axios.js';\nconst Teditor = () => {\n\n\n    const [use, setUse] = useState('')\n\n    axios.get('http://localhost:5000/users/me', {\n            headers: {\n                'Authorization': localStorage.getItem('token')\n            }\n        })\n        .then(res => {\n            console.log('present user exists');\n            console.log(res.data);\n            setUse(res.data._id);\n            console.log('here is out user id')\n            console.log(use)\n        })\n        .catch(error => {\n            console.log('no one logged in')\n        })\n\n\n    const [editorState, setEditorState] = useState(\n        () => EditorState.createEmpty(),\n    );\n    useEffect(() => {\n        setEditorState(editorState)\n    }, [])\n    const [convertedContent, setConvertedContent] = useState(null);\n    const handleEditorChange = (state) => {\n        setEditorState(state);\n        toDb(state)\n    }\n    const toDb = (state) => {\n        const raw = convertToRaw(state.getCurrentContent())\n        const jsData = JSON.stringify(raw)\n        localStorage.setItem('val', jsData)\n        return jsData\n    }\n    const fromJson = (jsData) => {\n        // const jsData = localStorage.getItem('val')\n        const raw = JSON.parse(jsData)\n        const cState = convertFromRaw(raw)\n        const eState = createWithContent(cState)\n        return eState\n    }\n    const convertContentToHTML = () => {\n        let currentContentAsHTML = convertToHTML(editorState.getCurrentContent());\n        setConvertedContent(currentContentAsHTML);\n    }\n    const createMarkup = (html) => {\n        return {\n            __html: DOMPurify.sanitize(html)\n        }\n    }\n    const addTemplate = async(e) => {\n        e.preventDefault()\n        const jsData = toDb(editorState)\n        console.log('jsData = ', jsData)\n        const template = {\n            userId: \"61c9a3787446b48ff058b3fb\",\n            data: jsData\n        }\n        const data = await axios.addTemplate(template)\n        console.log('success!');\n    }\n    const loadTemplate = async(e) => {\n        e.preventDefault()\n        const jsData = await axios.getTemplates()\n        const data = jsData.data[1]\n        console.log('data = ', data)\n        const estate = fromJson(data.data)\n        console.log('estate = ', estate)\n        setEditorState(estate)\n\n    }\n    return ( <\n        div className = \"App\" >\n        <\n        div className = 'wrapper' >\n        <\n        Editor editorState = { editorState }\n        onEditorStateChange = { handleEditorChange }\n        wrapperClassName = \"wrapper-class\"\n        editorClassName = \"editor-class\"\n        toolbarClassName = 'hide-toolbar' /\n        >\n        <\n        /div> { /* <div className=\"preview\" dangerouslySetInnerHTML={createMarkup(convertedContent)}> sdfa</div> */ } <\n        div >\n        <\n        button onClick = { loadTemplate } > Save < /button> <\n        /div> <\n        /div>\n    )\n}\nexport default Teditor;"]},"metadata":{},"sourceType":"module"}